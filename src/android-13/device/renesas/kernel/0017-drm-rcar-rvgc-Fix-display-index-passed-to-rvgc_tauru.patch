From 95f46adff6c4a983c7aa5b897c3c6d3b23097a0c Mon Sep 17 00:00:00 2001
From: Phil Edworthy <phil.edworthy@renesas.com>
Date: Thu, 21 Jan 2021 08:39:27 +0000
Subject: [PATCH 17/40] drm: rcar-rvgc: Fix display index passed to
 rvgc_taurus_display_flush()

---
 drivers/gpu/drm/rcar-rvgc/rcar_rvgc_pipe.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/rcar-rvgc/rcar_rvgc_pipe.c b/drivers/gpu/drm/rcar-rvgc/rcar_rvgc_pipe.c
index 1256ea43305b..9723a1b65388 100644
--- a/drivers/gpu/drm/rcar-rvgc/rcar_rvgc_pipe.c
+++ b/drivers/gpu/drm/rcar-rvgc/rcar_rvgc_pipe.c
@@ -207,7 +207,6 @@ void rvgc_crtc_atomic_flush(struct drm_crtc* crtc,
 	int ret;
 	struct rcar_rvgc_pipe* rvgc_pipe = container_of(crtc, struct rcar_rvgc_pipe, crtc);
 	struct rcar_rvgc_device* rcrvgc    = rvgc_pipe->rcar_rvgc_dev;
-	unsigned int display_idx = rvgc_pipe->idx;
 	unsigned long flags;
 	struct taurus_rvgc_res_msg res_msg;
 
@@ -221,7 +220,7 @@ void rvgc_crtc_atomic_flush(struct drm_crtc* crtc,
 	}
 	/* Ask the Taurus server to flush the changes */
 	ret = rvgc_taurus_display_flush(rcrvgc,
-					display_idx,
+					rvgc_pipe->display_mapping,
 					0,
 					&res_msg);
 	if (ret) {
-- 
2.25.1

